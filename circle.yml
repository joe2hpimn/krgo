machine:
  pre:
    - curl -o go.tar.gz -sL https://golang.org/dl/go1.4.1.linux-amd64.tar.gz
    - sudo rm -rf /usr/local/go
    - sudo tar -C /usr/local -xzf go.tar.gz
    - sudo chmod a+w /usr/local/go/src/

checkout:
  pre:
    - mkdir -p /home/ubuntu/go/src/github.com/robinmonjo/krgo

  override:
    - git clone https://github.com/robinmonjo/cargo.git /home/ubuntu/go/src/github.com/robinmonjo/krgo


dependencies:
  pre:
    - cd /home/ubuntu/go/src/github.com/robinmonjo/krgo
  override:
    - make vendor

test:
  pre:
    - cd /home/ubuntu/go/src/github.com/robinmonjo/krgo
    - go version
  override:
    - sudo -E bash -c 'GOPATH=/home/ubuntu/go PATH=$PATH:/usr/local/go/bin:$GOPATH/bin make test'
